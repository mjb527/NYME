<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon"
        href="https://cdn1.iconfinder.com/data/icons/business-finance-line-3/100/Finance_Upward_Trend-512.png">
    <title>New York Mock Exchange</title>
    <link rel="stylesheet" href="frameworks/bootstrap.css">
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    </head>

<body>
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        By using this website you agree to the <strong>Terms of Service</strong>: <a href="#" id="tos">New York Mock Exchange</a>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <nav class="navbar navbar-light bg-light" id="nav">
        <a class="navbar-brand"><i class="fas fa-chart-line"></i> New York Mock Exchange</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a id="openProfile" class="nav-link" data-toggle="modal" data-target="#profile-modal" href="#">Profile <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="modal" data-target="#buy-modal" href="#">Buy</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="modal" data-target="#sell-modal" id="openSell" href="#">Sell</a>
                </li>
                </a>

    </nav>

    <div class="mb-5" id="radio-buttons">
        <form class="form-inline mx-4" alignment="center" id="searchForm">
            <div class="form-inline" alignment="center">
                <input id="input" data-toggle= "tooltip" data-placement="bottom" title="Enter with NO spaces, only commas to separate" class="form-control mr-sm-2" type="search" placeholder="Example: AAPL,IBM"
                    aria-label="Search">

                <button class="btn btn-outline-success mr-sm-2" type="submit"><i class="fas fa-search"></i></button>
                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="oneDay" value="oneDay"
                            checked>
                        <label class="radio-inline " for="exampleRadios1">
                            One Day
                        </label>
                    </div>
                </div>

                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="oneWeek" value="oneWeek">
                        <label class="radio-inline" for="exampleRadios2">
                            One Week
                        </label>
                    </div>
                </div>

                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="twoWeek" value="twoWeek">
                        <label class="radio-inline" for="exampleRadios3">
                            Two Week
                        </label>
                    </div>
                </div>

                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="oneMonth"
                            value="oneMonth">
                        <label class="radio-inline" for="exampleRadios4">
                            One Month
                        </label>
                    </div>
                </div>

                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="threeMonth"
                            value="threeMonth">
                        <label class="radio-line" for="exampleRadios6">
                            Three Month
                        </label>
                    </div>
                </div>

                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="sixMonth"
                            value="sixMonth">
                        <label class="radio-line" for="exampleRadios7">
                            Six Month
                        </label>
                    </div>
                </div>

                <div class="col-auto">
                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="oneYear" value="oneYear">
                        <label class="radio-line" for="exampleRadios8">
                            52 Week
                        </label>
                    </div>

        </form>
    </div>

    <div class="container" id="chart-container" alignment="center">
      <div id="canvas-div" class="pt-4" alignment="center">
        <canvas id="canvas" class="outline rounded p-2"  width="300" height="300"></canvas>
      </div>

    <div class="table-responsive my-5 rounded" id="table-container">
        <table id="table" class="table table-hover table-dark rounded" alignment="center"></table>
    </div>
  </div>

    <footer>&copy 2020 New York Mock Exchange </footer>

    <div class="modal text-dark" tabindex="-1" role="dialog" id="profile-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Profile</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" id="profile-body">

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" tabindex="-1" role="dialog" id="profile-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Profile</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" id="profile-body">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal text-dark" tabindex="-1" role="dialog" id="buy-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Purchase Stocks</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <input type="text" id="buyInput" name="buyInput" placeholder="Stock Symbol">
                <input type="number" min="1" id="buyCount" name="buyCount" placeholder="1">
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" id="buyButton" class="btn btn-primary" data-dismiss="modal">Purchase</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal text-dark" tabindex="-1" role="dialog" id = "sell-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Sell Stocks</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form id="sell-form">
                <div class="col-md-6 col-sm-12">
                  <select class="w-100" name="" id="sellDropdown" value="" placeholder="Select Stock Symbol"></select>
                </div>
                <div class="col-md-6 col-sm-12">
                  <select class="w-100 disabled" name="countDropdown" id="countDropdown" value=""></select>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button id="sellButton" type="button" class="btn btn-primary">Sell Stocks</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal text-dark" tabindex="-1" role="dialog" id="error-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Something went wrong :(</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" id="error-body"></div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal text-dark" tabindex="-1" role="dialog" id="terms-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Terms of Service</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" id="error-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    <!-- chart.js -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <!-- font awesome -->
    <script src="https://kit.fontawesome.com/08e270e5ef.js" crossorigin="anonymous"></script>

    <!-- custom js -->
    <script type="text/javascript" src="script.js"></script>

    <script type="text/javascript">

      $(document).ready(function() {
          getIndexes();
          setProfile();
          getProfile();
      });

      // when they click search on the horizontal form at the top
      $('#searchForm').submit(function(event) {
        event.preventDefault();
        getQuotes();
      });

      // populate profile on click
      $('#openProfile').click(function(event) {
        event.preventDefault();
        getProfile();
      });

      $('#buyButton').click(function(event) {
        event.preventDefault();
        const symbol = $('#buyInput').val().trim();
        const count = $('#buyCount').val().trim();
        purchase(symbol, parseInt(count));
      });

      $('#openSell').click(function(event) {
        event.preventDefault();
        buildSelect();
      });

      // dynamically populate the list & make available for changing
      $('#sellDropdown').change(function(event) {
        event.preventDefault();
        const cdd = $('#countDropdown');
        const max = stocksList[$('#sellDropdown').val().trim()];
        cdd.empty();
        for(let i = max; i > 0; i--)
          cdd.append(`<option>${i}</option>`);

        cdd.removeClass('disabled');

      });

      $('#sellButton').click(function(event) {
        event.preventDefault();
        const symbol = $('#sellDropdown').val().trim();
        const count = $('#countDropdown').val();
        sell(symbol, count);
        $('#countDropdown').addClass('disabled');
        $('#sell-modal').modal('hide');
      });

      $('#tos').click(function(event) {
        event.preventDefault();
        $('#terms-modal').modal('show');
      });



    </script>

</body>

</html>
